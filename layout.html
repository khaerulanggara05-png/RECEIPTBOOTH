<script src="system.js"></script>
<script>
    // Fungsi untuk memuat gambar preview dari Admin jika ada
    function loadCustomPreviews() {
        for (let i = 1; i <= 4; i++) {
            const customUrl = localStorage.getItem("customFrameURL_" + i);
            if (customUrl) {
                // Cari gambar di dalam card ke-i dan ganti src-nya
                const imgElements = document.querySelectorAll('.preview-image img');
                if (imgElements[i-1]) {
                    imgElements[i-1].src = customUrl;
                }
            }
        }
    }

    function select(layout, price, photoCount, defaultFrameFile) {
        // Cek apakah ada frame custom yang diatur di Admin Panel
        const customFrame = localStorage.getItem("customFrameURL_" + layout);
        
        // Gunakan custom frame jika ada, jika tidak gunakan file bawaan
        const finalFrame = customFrame ? customFrame : defaultFrameFile;

        updateTransaction({
            layout: layout,
            price: price,
            photoCount: photoCount,
            selectedFrameFile: finalFrame 
        });
        
        location.href = 'payment.html';
    }

    // Jalankan pengecekan preview saat halaman dimuat
    window.onload = loadCustomPreviews;
</script>
